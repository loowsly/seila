javascript:(function(){if(window.aiAssistant){window.aiAssistant.toggle();return;}const API_URL='https://seila-lemon.vercel.app/api/chat';const models=[  {id:'anthropic/claude-3.5-sonnet',name:'Claude 3.5 Sonnet'},  {id:'openai/gpt-4o',name:'GPT-4o'},  {id:'google/gemini-2.0-flash-exp',name:'Gemini 2.0 Flash'},  {id:'meta-llama/llama-3.2-90b-vision-instruct',name:'Llama 3.2 90B Vision'},  {id:'anthropic/claude-3-haiku',name:'Claude 3 Haiku'},  {id:'openai/gpt-4o-mini',name:'GPT-4o Mini'}];let currentModel=models[0];let messages=[];let isVisible=false;let currentImagePreview=null;function isImageUrl(url){  if(!url) return false;  try {    const u = new URL(url);    const imageExtensions = ['.jpg','.jpeg','.png','.gif','.webp','.bmp','.svg'];    const pathname = u.pathname.toLowerCase();    return imageExtensions.some(ext => pathname.endsWith(ext));  } catch {    return false;  }}function createImagePreview(url,container){  if(currentImagePreview){    currentImagePreview.remove();    currentImagePreview=null;  }  const previewContainer=document.createElement('div');  previewContainer.style.cssText='margin-top:8px;padding:8px;border:1px solid #d1d5db;border-radius:6px;background:#f9fafb;position:relative;';  const img=document.createElement('img');  img.style.cssText='max-width:100%;max-height:120px;border-radius:4px;display:block;margin:0 auto;';  img.crossOrigin='anonymous';  const removeBtn=document.createElement('button');  removeBtn.innerHTML='×';  removeBtn.style.cssText='position:absolute;top:4px;right:4px;background:#ef4444;color:white;border:none;border-radius:50%;width:20px;height:20px;cursor:pointer;font-size:12px;display:flex;align-items:center;justify-content:center;';  const loadingText=document.createElement('div');  loadingText.textContent='Carregando imagem...';  loadingText.style.cssText='text-align:center;color:#6b7280;font-size:12px;padding:20px;';  previewContainer.appendChild(loadingText);  img.onload=function(){    loadingText.remove();    previewContainer.appendChild(img);    previewContainer.appendChild(removeBtn);  };  img.onerror=function(){    loadingText.textContent='Erro ao carregar imagem';    loadingText.style.color='#ef4444';  };  removeBtn.onclick=function(){    previewContainer.remove();    currentImagePreview=null;    document.getElementById('image-input').value='';  };  img.src=url;  container.appendChild(previewContainer);  currentImagePreview=previewContainer;}function createAssistant(){  const styles=document.createElement('style');  styles.textContent=%60    #ai-assistant{position:fixed;top:20px;right:20px;width:400px;height:600px;background:white;border:1px solid #e2e8f0;border-radius:12px;box-shadow:0 25px 50px -12px rgba(0,0,0,0.25);z-index:999999;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;display:flex;flex-direction:column;overflow:hidden}    #ai-assistant.hidden{display:none}    .ai-header{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:16px;display:flex;justify-content:space-between;align-items:center}    .ai-title{font-weight:600;font-size:16px}    .ai-model-selector{background:rgba(255,255,255,0.2);border:none;color:white;padding:4px 8px;border-radius:6px;font-size:12px;cursor:pointer}    .ai-messages{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12px}    .ai-message{max-width:85%;padding:12px;border-radius:12px;font-size:14px;line-height:1.4}    .ai-message.user{background:#3b82f6;color:white;align-self:flex-end;border-bottom-right-radius:4px}    .ai-message.assistant{background:#f1f5f9;color:#334155;align-self:flex-start;border-bottom-left-radius:4px}    .ai-message.loading{background:#f1f5f9;color:#64748b;align-self:flex-start;border-bottom-left-radius:4px}    .ai-message img{max-width:200px;max-height:150px;border-radius:8px;margin-top:8px;display:block}    .ai-input-area{padding:16px;border-top:1px solid #e2e8f0;background:#f8fafc}    .ai-input-container{display:flex;gap:8px;align-items:flex-end}    .ai-input{flex:1;border:1px solid #d1d5db;border-radius:8px;padding:8px 12px;font-size:14px;resize:none;min-height:40px;max-height:120px;font-family:inherit}    .ai-send-btn{background:#3b82f6;color:white;border:none;border-radius:8px;padding:8px 16px;cursor:pointer;font-size:14px;font-weight:500;height:40px}    .ai-send-btn:hover{background:#2563eb}    .ai-send-btn:disabled{background:#9ca3af;cursor:not-allowed}    .ai-image-input{width:100%;margin-top:8px;padding:6px 8px;border:1px solid #d1d5db;border-radius:6px;font-size:12px}    .ai-close-btn{background:rgba(255,255,256,0.2);border:none;color:white;width:24px;height:24px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center}    .typing-indicator{display:inline-block;width:8px;height:8px;border-radius:50%;background:#64748b;animation:typing 1.4s infinite ease-in-out}    .typing-indicator:nth-child(1){animation-delay:-0.32s}    .typing-indicator:nth-child(2){animation-delay:-0.16s}    @keyframes typing{0%,80%,100%{transform:scale(0);opacity:0.5}40%{transform:scale(1);opacity:1}}    @media (max-width:480px){#ai-assistant{width:calc(100vw - 20px);height:calc(100vh - 40px);top:10px;right:10px}}  %60;  document.head.appendChild(styles);  const container=document.createElement('div');  container.id='ai-assistant';  container.className='hidden';  const header=document.createElement('div');  header.className='ai-header';  const title=document.createElement('div');  title.className='ai-title';  title.textContent='AI Assistant';  const controls=document.createElement('div');  controls.style.display='flex';  controls.style.gap='8px';  controls.style.alignItems='center';  const modelSelector=document.createElement('select');  modelSelector.className='ai-model-selector';  modelSelector.id='model-selector';  models.forEach(function(model){    const option=document.createElement('option');    option.value=model.id;    option.textContent=model.name;    modelSelector.appendChild(option);  });  const closeBtn=document.createElement('button');  closeBtn.className='ai-close-btn';  closeBtn.id='close-btn';  closeBtn.textContent='×';  controls.appendChild(modelSelector);  controls.appendChild(closeBtn);  header.appendChild(title);  header.appendChild(controls);  const messagesContainer=document.createElement('div');  messagesContainer.className='ai-messages';  messagesContainer.id='messages';  const inputArea=document.createElement('div');  inputArea.className='ai-input-area';  const inputContainer=document.createElement('div');  inputContainer.className='ai-input-container';  const userInput=document.createElement('textarea');  userInput.className='ai-input';  userInput.id='user-input';  userInput.placeholder='Digite sua pergunta...';  userInput.rows=1;  const sendBtn=document.createElement('button');  sendBtn.className='ai-send-btn';  sendBtn.id='send-btn';  sendBtn.textContent='Enviar';  inputContainer.appendChild(userInput);  inputContainer.appendChild(sendBtn);  const imageInput=document.createElement('input');  imageInput.type='url';  imageInput.className='ai-image-input';  imageInput.id='image-input';  imageInput.placeholder='Cole a URL da imagem aqui...';  inputArea.appendChild(inputContainer);  inputArea.appendChild(imageInput);  container.appendChild(header);  container.appendChild(messagesContainer);  container.appendChild(inputArea);  document.body.appendChild(container);  userInput.addEventListener('input',function(){    this.style.height='auto';    this.style.height=Math.min(this.scrollHeight,120)+'px';  });  imageInput.addEventListener('input',function(){    const url=this.value.trim();    if(url && isImageUrl(url)){      createImagePreview(url,inputArea);    } else if(currentImagePreview){      currentImagePreview.remove();      currentImagePreview=null;    }  });  imageInput.addEventListener('paste',function(e){    setTimeout(function(){      const url=imageInput.value.trim();      if(url && isImageUrl(url)){        createImagePreview(url,inputArea);      }    },100);  });  modelSelector.addEventListener('change',function(){    for(let i=0;i<models.length;i++){      if(models[i].id===this.value){        currentModel=models[i];        break;      }    }  });  closeBtn.addEventListener('click',toggle);  async function sendMessage(){    const text=userInput.value.trim();    const imageUrl=imageInput.value.trim();    if(!text && !imageUrl) return;    const userMessage={role:'user',content:[]};    if(text){      userMessage.content.push({type:'text',text:text});    }    if(imageUrl){      userMessage.content.push({type:'image_url',image_url:{url:imageUrl}});    }    messages.push(userMessage);    const userDiv=document.createElement('div');    userDiv.className='ai-message user';    if(text){      const textSpan=document.createElement('div');      textSpan.textContent=text;      userDiv.appendChild(textSpan);    }    if(imageUrl){      const imgElement=document.createElement('img');      imgElement.src=imageUrl;      imgElement.crossOrigin='anonymous';      imgElement.style.cssText='max-width:200px;max-height:150px;border-radius:8px;margin-top:8px;display:block;';      userDiv.appendChild(imgElement);    }    messagesContainer.appendChild(userDiv);    userInput.value='';    imageInput.value='';    userInput.style.height='auto';    if(currentImagePreview){      currentImagePreview.remove();      currentImagePreview=null;    }    const loadingDiv=document.createElement('div');    loadingDiv.className='ai-message loading';    for(let i=0;i<3;i++){      const indicator=document.createElement('span');      indicator.className='typing-indicator';      loadingDiv.appendChild(indicator);    }    messagesContainer.appendChild(loadingDiv);    messagesContainer.scrollTop=messagesContainer.scrollHeight;    sendBtn.disabled=true;    try{      const response=await fetch(API_URL,{        method:'POST',        headers:{          'Content-Type':'application/json',        },        body:JSON.stringify({          modelId: currentModel.id,          messages: messages,          imageUrl: imageUrl || undefined        })      });      if(!response.ok){        throw new Error('HTTP '+response.status+': '+response.statusText);      }      const data=await response.json();      const assistantMessage={role:'assistant', content: data.response || '[Sem resposta]'};      messages.push(assistantMessage);      messagesContainer.removeChild(loadingDiv);      const assistantDiv=document.createElement('div');      assistantDiv.className='ai-message assistant';      assistantDiv.textContent=assistantMessage.content;      messagesContainer.appendChild(assistantDiv);    }catch(error){      messagesContainer.removeChild(loadingDiv);      const errorDiv=document.createElement('div');      errorDiv.className='ai-message assistant';      errorDiv.textContent='Erro: '+error.message;      errorDiv.style.color='#dc2626';      messagesContainer.appendChild(errorDiv);    }    sendBtn.disabled=false;    messagesContainer.scrollTop=messagesContainer.scrollHeight;  }  sendBtn.addEventListener('click',sendMessage);  userInput.addEventListener('keydown',function(e){    if(e.key==='Enter' && !e.shiftKey){      e.preventDefault();      sendMessage();    }  });  const welcomeDiv=document.createElement('div');  welcomeDiv.className='ai-message assistant';  welcomeDiv.textContent='Olá! Sou seu assistente AI. Cole URLs de imagem no campo abaixo e verei uma prévia automática!';  messagesContainer.appendChild(welcomeDiv);}function toggle(){  const assistant=document.getElementById('ai-assistant');  if(assistant){    isVisible=!isVisible;    assistant.className=isVisible?'':'hidden';    if(isVisible){      const input=document.getElementById('user-input');      if(input)input.focus();    }  }}document.addEventListener('keydown',function(e){  if(e.key==='1'&&!e.ctrlKey&&!e.altKey&&!e.metaKey){    const activeElement=document.activeElement;    if(activeElement.tagName!=='INPUT'&&activeElement.tagName!=='TEXTAREA'&&!activeElement.isContentEditable){      e.preventDefault();      toggle();    }  }});createAssistant();window.aiAssistant={toggle:toggle};setTimeout(toggle,100);})();